CREATE DATABASE PHR_AUTH;

CREATE TABLE USERS (ID INT AUTO_INCREMENT PRIMARY KEY, EMAIL VARCHAR(255) NOT NULL, PASSWORD VARCHAR(500) NOT NULL, PHONE VARCHAR(15), NAME VARCHAR(255), REGION VARCHAR(255), PROVINCE VARCHAR(255), CREATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP, USER_ROLE VARCHAR(150) NOT NULL);

CREATE TABLE USER_HEALTH_RECORD (ID INT AUTO_INCREMENT PRIMARY KEY, CYPERTEXT_POLICY VARCHAR(500) DEFAULT "~~", CYPERTEXT_RECORD VARCHAR(500) DEFAULT "~~", CYPERTEXT_RECORD_REF VARCHAR(500) DEFAULT "~~", USER_ID INT NOT NULL, CREATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (USER_ID) REFERENCES USERS(ID));

CREATE TABLE ATTRIBUTES (ID INT AUTO_INCREMENT PRIMARY KEY, ATTRIBUTE VARCHAR(245) NOT NULL);

CREATE TABLE USER_HAS_ATTRIBUTE_SET (USER_ID INT NOT NULL, ATTRIBUTE_ID INT NOT NULL, PRIMARY KEY (USER_ID, ATTRIBUTE_ID), FOREIGN KEY (USER_ID) REFERENCES USERS(ID), FOREIGN KEY(ATTRIBUTE_ID) REFERENCES ATTRIBUTES(ID));
