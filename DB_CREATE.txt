DROP DATABASE SHARM12F_PHRAUTH;

CREATE DATABASE SHARM12F_PHRAUTH;

USE SHARM12F_PHRAUTH;

CREATE TABLE REGIONS (NAME VARCHAR(255) PRIMARY KEY);

CREATE TABLE PROVINCES (NAME VARCHAR(255) PRIMARY KEY);

CREATE TABLE ORGANIZATION (NAME VARCHAR(255) PRIMARY KEY);

CREATE TABLE DEPARTMENT (NAME VARCHAR(255) PRIMARY KEY);

CREATE TABLE HEALTH_PROFESSIONAL (NAME VARCHAR(255) PRIMARY KEY);

CREATE TABLE HEALTH_PROFESSIONAL_USER (ID INT AUTO_INCREMENT PRIMARY KEY, EMAIL VARCHAR(255) NOT NULL, PASSWORD VARCHAR(500) NOT NULL, PHONE VARCHAR(15), NAME VARCHAR(255), REGION VARCHAR(255), PROVINCE VARCHAR(255), ORGANIZATION VARCHAR(255), DEPARTMENT VARCHAR(255), HEALTH_PROFESSIONAL VARCHAR(255), CREATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP, USER_ROLE VARCHAR(150) NOT NULL, LOGIN TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL, LOGOUT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL, FOREIGN KEY (REGION) REFERENCES REGIONS(NAME), FOREIGN KEY (ORGANIZATION) REFERENCES ORGANIZATION(NAME), FOREIGN KEY (DEPARTMENT) REFERENCES DEPARTMENT(NAME), FOREIGN KEY (HEALTH_PROFESSIONAL) REFERENCES HEALTH_PROFESSIONAL(NAME));

CREATE TABLE USERS (ID INT AUTO_INCREMENT PRIMARY KEY, EMAIL VARCHAR(255) NOT NULL, PASSWORD VARCHAR(500) NOT NULL, PHONE VARCHAR(15), NAME VARCHAR(255), REGION VARCHAR(255), PROVINCE VARCHAR(255), CREATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP, USER_ROLE VARCHAR(150) NOT NULL, LOGIN TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL, LOGOUT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL, FOREIGN KEY (REGION) REFERENCES REGIONS(NAME), FOREIGN KEY (PROVINCE) REFERENCES PROVINCES(NAME));

CREATE TABLE USER_HEALTH_RECORD (ID INT AUTO_INCREMENT PRIMARY KEY, NAME VARCHAR(20), RECORD VARCHAR(500), USER_ID INT NOT NULL, CREATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (USER_ID) REFERENCES USERS(ID));

CREATE TABLE HEALTH_PROFESSIONAL_HAS_USER_HEALTH_RECORD (ID INT AUTO_INCREMENT  PRIMARY KEY, USER_HEALTH_RECORD_ID INT NOT NULL, HEALTH_PROFESSIONAL_ID INT NOT NULL, CREATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (USER_HEALTH_RECORD_ID) REFERENCES USER_HEALTH_RECORD(ID), FOREIGN KEY (HEALTH_PROFESSIONAL_ID) REFERENCES HEALTH_PROFESSIONAL_USER(ID));

CREATE TABLE NOTES (ID INT AUTO_INCREMENT PRIMARY KEY, USER_ID INT NOT NULL, HEALTH_PROFESSIONAL_ID INT NOT NULL, NAME VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(1024) NOT NULL, CREATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (USER_ID) REFERENCES USERS(ID), FOREIGN KEY (HEALTH_PROFESSIONAL_ID) REFERENCES HEALTH_PROFESSIONAL_USER(ID));